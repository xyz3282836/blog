import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,a,o as p}from"./app-B-T4AwSB.js";const n="/assets/lr-CC5aqBPm.png",s="/assets/recommend-gFRqIEQm.png",l="/assets/case1-CqQ-15FF.png",r="/assets/case2-D60kZRSU.png",o="/assets/case3-D-K50q0l.png",c={};function h(d,e){return p(),t("div",null,e[0]||(e[0]=[a('<h2 id="资料" tabindex="-1"><a class="header-anchor" href="#资料"><span>资料</span></a></h2><p>https://space.bilibili.com/1640056/video</p><p>https://space.bilibili.com/250989068/video</p><p>https://space.bilibili.com/435304165/video</p><h2 id="后缀" tabindex="-1"><a class="header-anchor" href="#后缀"><span>后缀</span></a></h2><ol><li>ckpt</li><li>pt</li><li>pth</li><li>safetensors</li><li>webui 特殊模型保存方法：PNG、WEBP 图片格式</li></ol><h3 id="大模型" tabindex="-1"><a class="header-anchor" href="#大模型"><span>大模型</span></a></h3><p>常见格式为 <strong>ckpt</strong>，一个字，大。</p><p>大小在 GB 级别，常见有 2G、4G、7G 模型。</p><p>在 models/stable-diffsuion/</p><h3 id="小模型" tabindex="-1"><a class="header-anchor" href="#小模型"><span>小模型</span></a></h3><h4 id="embedding-模型" tabindex="-1"><a class="header-anchor" href="#embedding-模型"><span>embedding 模型</span></a></h4><p>常见格式为 <strong>pt</strong>、png 图片、webp 图片。大小一般在 KB 级别。</p><p>在 embeddings/</p><p>可训练：画风 √ 人物 √ | 推荐训练：<strong>人物</strong></p><p>配置要求：显存 6GB 以上。</p><p>训练速度：中等 | 训练难度：中等</p><p>综合评价：☆☆☆</p><p>评价：比较基础的一种，局限性较大，但是可以用</p><h4 id="hypernetwork" tabindex="-1"><a class="header-anchor" href="#hypernetwork"><span>hypernetwork</span></a></h4><p>常见格式为 <strong>pt</strong>。大小一般在几十兆到几百兆不等。由于这种模型可以自定义的参数非常之多，一些离谱的 Hypernetwork 模型可以达到 GB 级别。</p><p>在 hypernetworks/</p><p>可训练：画风 √ 人物 √ | 推荐训练：<strong>画风</strong></p><p>配置要求：显存 6GB 以上。</p><p>训练速度：中等 | 训练难度：难</p><p>综合评价：☆☆</p><p>评价：非常强大的一种模型，但是想训练好很难，不推荐训练。</p><h4 id="lora" tabindex="-1"><a class="header-anchor" href="#lora"><span>LoRA</span></a></h4><p>常见格式为 <strong>pt</strong>、<strong>ckpt</strong>。大小一般在 8mb~144mb 不等。</p><p>在 models/lora/</p><p>可训练：画风? 人物 √ 概念 √ | 推荐训练：<strong>人物</strong></p><p>配置要求：显存 8GB 以上。</p><p>训练速度：快 | 训练难度：简单</p><p>综合评价：☆☆☆☆</p><p>评价：非常好训练 好出效果的人物训练，配置要求低，图要求少。</p><p>备注：LoRA 本身也应该归类到 Dreambooth，但是这里还是分开讲。</p><h4 id="vae-模型" tabindex="-1"><a class="header-anchor" href="#vae-模型"><span>VAE 模型</span></a></h4><p>常见格式为 <strong>pt</strong></p><p>在 models/VAE/</p><h4 id="dreambooth-native-train" tabindex="-1"><a class="header-anchor" href="#dreambooth-native-train"><span>Dreambooth / Native Train</span></a></h4><p>可训练：画风 √ 人物 √ 概念 √ | 推荐训练：Dreambooth 推荐人物，Native Train 推荐画风</p><p>配置要求：显存 12GB 以上。</p><p>训练速度：慢 | 训练难度：可以简单可以很难</p><p>综合评价：☆☆☆☆☆</p><p>评价：微调大模型，非常强大的训练方式，但是使用上会不那么灵活，推荐训练画风用，人物使用 LoRA 训练。</p><h2 id="训练" tabindex="-1"><a class="header-anchor" href="#训练"><span>训练</span></a></h2><p>image _ repeat _ epoch / batch_size = total steps</p><p>10 张图 _ 20 次 _ 10 个循环 / 2 并行 = 1000 总训练步数</p><p>batch_size 和显存大小有关</p><p>两者乘积固定的时候，repeat 比 epoch 会更加化时间</p><p>20 * 5 = 100，花费 51min</p><p>100 * 1 = 100，花费 90min</p><p>多 epoch 方案的拟合性更好</p><p>![repeat vs epoch](./assets/repeat vs epoch.png)</p><p>![lr vs lr](./assets/lr vs lr.png)</p><h3 id="学习率" tabindex="-1"><a class="header-anchor" href="#学习率"><span>学习率</span></a></h3><figure><img src="'+n+'" alt="lr" tabindex="0" loading="lazy"><figcaption>lr</figcaption></figure><h3 id="dim" tabindex="-1"><a class="header-anchor" href="#dim"><span>DIM</span></a></h3><p>表示神经网络的维度，维度越大，模型的表达能力越强，模型的体积也会越大。</p><p>network_dimension</p><ul><li>128，140MB+（现实世界实物，风景，人物 &gt;128）</li><li>64，70MB+（人物 32-128）</li><li>32，40MB+（二次元）</li></ul><h3 id="optimizer" tabindex="-1"><a class="header-anchor" href="#optimizer"><span>Optimizer</span></a></h3><p>AdamW8bit</p><p>Dadptation</p><p>Lion</p><h2 id="参数建议" tabindex="-1"><a class="header-anchor" href="#参数建议"><span>参数建议</span></a></h2><figure><img src="'+s+'" alt="recommend" tabindex="0" loading="lazy"><figcaption>recommend</figcaption></figure><h3 id="案例" tabindex="-1"><a class="header-anchor" href="#案例"><span>案例</span></a></h3><figure><img src="'+l+'" alt="case1" tabindex="0" loading="lazy"><figcaption>case1</figcaption></figure><figure><img src="'+r+'" alt="case2" tabindex="0" loading="lazy"><figcaption>case2</figcaption></figure><figure><img src="'+o+'" alt="case3" tabindex="0" loading="lazy"><figcaption>case3</figcaption></figure><h3 id="tag" tabindex="-1"><a class="header-anchor" href="#tag"><span>tag</span></a></h3><p>期望固化的模型特征，不要打 tag，这样使用中就生存固定特征了，而不会被改变</p>',73)]))}const b=i(c,[["render",h],["__file","base.html.vue"]]),u=JSON.parse('{"path":"/ai/stable-diffusion/base.html","title":"基础","lang":"zh-CN","frontmatter":{"date":"2024-01-27T00:00:00.000Z","title":"基础","icon":"pic","category":"ai","tag":["stable diffusion"],"description":"资料 https://space.bilibili.com/1640056/video https://space.bilibili.com/250989068/video https://space.bilibili.com/435304165/video 后缀 ckpt pt pth safetensors webui 特殊模型保存方法：PNG、W...","head":[["meta",{"property":"og:url","content":"https://blog.ruizhou.cf/ai/stable-diffusion/base.html"}],["meta",{"property":"og:site_name","content":"rz blog"}],["meta",{"property":"og:title","content":"基础"}],["meta",{"property":"og:description","content":"资料 https://space.bilibili.com/1640056/video https://space.bilibili.com/250989068/video https://space.bilibili.com/435304165/video 后缀 ckpt pt pth safetensors webui 特殊模型保存方法：PNG、W..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-28T08:14:42.000Z"}],["meta",{"property":"article:tag","content":"stable diffusion"}],["meta",{"property":"article:published_time","content":"2024-01-27T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-28T08:14:42.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"基础\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-01-27T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-28T08:14:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"ruizhou\\",\\"url\\":\\"https://blog.ruizhou.cf\\"}]}"]]},"headers":[{"level":2,"title":"资料","slug":"资料","link":"#资料","children":[]},{"level":2,"title":"后缀","slug":"后缀","link":"#后缀","children":[{"level":3,"title":"大模型","slug":"大模型","link":"#大模型","children":[]},{"level":3,"title":"小模型","slug":"小模型","link":"#小模型","children":[{"level":4,"title":"embedding 模型","slug":"embedding-模型","link":"#embedding-模型","children":[]},{"level":4,"title":"hypernetwork","slug":"hypernetwork","link":"#hypernetwork","children":[]},{"level":4,"title":"LoRA","slug":"lora","link":"#lora","children":[]},{"level":4,"title":"VAE 模型","slug":"vae-模型","link":"#vae-模型","children":[]},{"level":4,"title":"Dreambooth / Native Train","slug":"dreambooth-native-train","link":"#dreambooth-native-train","children":[]}]}]},{"level":2,"title":"训练","slug":"训练","link":"#训练","children":[{"level":3,"title":"学习率","slug":"学习率","link":"#学习率","children":[]},{"level":3,"title":"DIM","slug":"dim","link":"#dim","children":[]},{"level":3,"title":"Optimizer","slug":"optimizer","link":"#optimizer","children":[]}]},{"level":2,"title":"参数建议","slug":"参数建议","link":"#参数建议","children":[{"level":3,"title":"案例","slug":"案例","link":"#案例","children":[]},{"level":3,"title":"tag","slug":"tag","link":"#tag","children":[]}]}],"git":{"createdTime":1706285779000,"updatedTime":1706429682000,"contributors":[{"name":"liuruizhou","email":"liuruizhou@bilibili.com","commits":1},{"name":"zhou","email":"ruizhouliu@163.com","commits":1}]},"readingTime":{"minutes":2.33,"words":699},"filePathRelative":"ai/stable-diffusion/base.md","localizedDate":"2024年1月27日","excerpt":"","autoDesc":true}');export{b as comp,u as data};
